
t0 = ['..##.......',
      '#...#...#..',
      '.#....#..#.',
      '..#.#...#.#',
      '.#...##..#.',
      '..#.##.....',
      '.#.#.#....#',
      '.#........#',
      '#.##...#...',
      '#...##....#',
      '.#..#...#.#']


t1 = ['....#...##......##..#..#.#...#.',
      '..######...#......#....#..#.##.',
      '..#.#...##......#.#..#..#....#.',
      '..#.....#..#.#........#.#..#..#',
      '#......##..###...#.#..#.....#..',
      '#.......##...###...#....#......',
      '.....##...#......##.#.#..#.##..',
      '.........#......#.....#......#.',
      '..#.#..#....#....#......##.#.##',
      '.#...#..#.............#.#..#.#.',
      '....#..#.#.##.#....#..#..#....#',
      '...#..#.....#.......#...#..#..#',
      '.....#.....#.......#..#...#....',
      '.##.......#...#..#........#...#',
      '...#.......#.#.#...#.#.#......#',
      '#....#..#.....#......##....#..#',
      '###.#......#.#.#.#..#....#....#',
      '......##......#.#...#...#..#...',
      '.....#......#.#.#......#.#.....',
      '...##...#..#........#..#.##....',
      '..##.#.#..#...###..........#.#.',
      '.#..#..#.....#.........#.###.#.',
      '....##.....#...#...##..#.##...#',
      '....#.##....#.....##......#....',
      '........#.#.........#.#.......#',
      '#....##.#....#..#...#..........',
      '#..###......#....##..........##',
      '....##.#.....#..#.##......#....',
      '#..#......#......#.............',
      '...##.....##.......#.......#...',
      '#...#.#.....#..........#...###.',
      '#.....#..#.#.###...#......###..',
      '...##.#......#........#..#.....',
      '......#.....###.#...##........#',
      '.#......##......##....#....#...',
      '..#.#..#.....##....#....#..#...',
      '..#.#.....#.##.#.....#.....#...',
      '....#.......#...#.........##...',
      '.#....#..#.......##.......#....',
      '..#..##.....#...##.##.#.#......',
      '.##.#....#............#.......#',
      '.......#...#..#.#.##.....##..##',
      '..###....#..#.##........##.#...',
      '....#.#..#.....#..#.#.....#....',
      '..#..#.#..............#..#.....',
      '.......#.#.#.........#......#..',
      '...##..#.#...#......##.#.......',
      '#....#.#.........#...#....#..##',
      '.#..#.#...#.......#.#.#....#.##',
      '.#..###.#..#.#.....#..#........',
      '#.#..##.###.....##.........#..#',
      '#...##...#..##..#..#..........#',
      '.#...#..#......................',
      '...##..###...........#.#...##..',
      '..........#.#....#.#...........',
      '..#....#....#..#....#.#.#......',
      '.#..#.....###......#...#...#...',
      '#.##..#..#.........#..#....#...',
      '........#......#...#.........#.',
      '..#.....#.#..##...#.#.#...##...',
      '..#...........#.##..#.#..#.##..',
      '..............##...#.#......#..',
      '#.#..#....#...##.###........#..',
      '.#...#..#........#........##..#',
      '.....##..#...#.....#.#.........',
      '.#...#...#....###...#.#.#..##..',
      '....#.........#....###..##....#',
      '.#....#...####...##....####.#..',
      '..#..#.......#..#......#.#.#...',
      '....#....#.......##..#.#.......',
      '..#....#...........##.#.##.....',
      '#..#..#...##.##....#.#.#.###.##',
      '...#...#....#.#...##...#....###',
      '......##........#.........#.#..',
      '....#####..#..##.......#.#....#',
      '....##..#...###....#..#.....#..',
      '..#........#..#.#.....#....#...',
      '..#....#......#..#...#......#..',
      '...#.....##...#.#..##.....#..#.',
      '...#..#.......####.##...#......',
      '.....#..#..#.##..##....#..#.#..',
      '..#..#..##.#.#.##..#..#...#....',
      '...#..........#.........#....##',
      '.##.....###...............#.##.',
      '...##...........#.#.#......#..#',
      '.#...#.#.##....#....#..#.......',
      '.#...###.#....#..#..#..#......#',
      '#..#........###...........#..#.',
      '..#...#......#.#.#......####.#.',
      '...#.#....##.#.....#.....##....',
      '...###..#.#.#...#.....#.###..#.',
      '.#.#..#...##......#..........#.',
      '##.....#.......#.#..###...#.#..',
      '##.###....#.....#.....###.#....',
      '#...#..##....#.#...#...#......#',
      '.....##.#........#.###.........',
      '.#..#..#.#......##.#...#.#.....',
      '#..#.#........##...........##.#',
      '#...###..#..####..#.#..........',
      '..#...#....#...##.#....#....##.',
      '......#.#........#.....#..#....',
      '#.........#...#.....#...#..##..',
      '#....#.........#...#.##..###.#.',
      '#...###...#.##.#.#.............',
      '#.#....#....#......#....#.#...#',
      '##...#.##......#..#.#....#.....',
      '....#...#.##....#..............',
      '.........##..........#..##..#..',
      '......##....#.#......#.........',
      '..#.#..............#......#..##',
      '...........##.......#.#.#......',
      '##...#........##.......#.#.....',
      '....#...#...#....#.#......##...',
      '...#..#.#.#.........#..#.#....#',
      '.##.#...#.#.........#.....##.#.',
      '#.#.....#.#.....#..............',
      '..#.#..#....#..........#..##...',
      '...#..#....................#..#',
      '...........#...........#...#..#',
      '............#...#............##',
      '..#....##......##...........#..',
      '..#..#..#....#....##......##.##',
      '##..........#..##.##.#...#.....',
      '............#..#........###.#..',
      '###...##.#.#....#....#.#....#..',
      '...#......##...#.......####....',
      '.......#..#..#.#.....#.........',
      '........##.......##.....#......',
      '#.#...#.###....#..#...##.......',
      '...#.#....#..#####.#..##.#.....',
      '..#.#..##.......###...#.....#..',
      '..#.......#..#...#...#..#.##...',
      '......#..#.......#.....#....#..',
      '.......#........#.#.......##..#',
      '.#.#.....#.......#.......##..#.',
      '..#.#....#.#.#####.....#...#...',
      '#..#............###.......#..#.',
      '........##.........#..#...###..',
      '.#............##...#.....#.....',
      '.#..##..#....#....#.......#....',
      '....##..........##.............',
      '.##..........#..#..#....#...#..',
      '...#..#..#............####.....',
      '.............#..#.##..#.#.##...',
      '.....#........#....#.#.......#.',
      '###.#..#.#...#....##...........',
      '....#......#...#....##.......#.',
      '.......#.#...#.#...#........##.',
      '..........#........#..#.##.....',
      '##..#.#.....##.#...............',
      '.....#....#................#...',
      '...##....#........##.#....#....',
      '.....##...###....#.#..#.......#',
      '.....#.#.........##....###.....',
      '.#.....##......#..##..##...##.#',
      '.#..............#.....#.#......',
      '.##......#..#..#......##.......',
      '.......#..................#....',
      '...#.#...##......####.........#',
      '#....#####.#.#..#..#..#...#...#',
      '##.#...#.......#....#...#...###',
      '...#........#.....#...#.##.....',
      '..##....#.......#....#.......##',
      '#......#..##...#..##.#.....#.#.',
      '..###........#.#..#........#.#.',
      '...#.###..........#.....#.#.#..',
      '#.###.....#...#...#..##..###...',
      '#....#.#.....#.#........#......',
      '........#.......##.......#.....',
      '...........#...#......##.......',
      '............#...#....#..#.....#',
      '#.#.#.#....#.....#.#..........#',
      '#.##...#...#..#....##.#.......#',
      '...#..#......#..#...##..##..#..',
      '#....#......#.#.....##.#..#....',
      '#....#..##.#......#.#.....#..##',
      '.#..##....##....#.#...#...#....',
      '#.#.###....#.#............#...#',
      '.#.#....#..#..........#....#.#.',
      '......#..#.#...............##..',
      '..#......###.#..........#.###..',
      '....#.##.#..#...##..#.#...#....',
      '..............#...##.......#.##',
      '.#...........#....#....#.##....',
      '#..#....#.....#...#.....##...#.',
      '.........#...#.##.......#...#.#',
      '.....#......#.........#.#..#...',
      '##..........#.#..##...#.#.#....',
      '##..##.#..#..#.....#.##....#...',
      '........##....#.#.#....#......#',
      '.#.##...#.###....#.........#..#',
      '..........#....###..#.........#',
      '#.#..#.#...#.......#..##.......',
      '..#....#...###..............##.',
      '#..###.....####...#..#..#...#..',
      '......#..#...###........###....',
      '..#.....#...#.......#....###..#',
      '.#.........#.#.#....#.#.......#',
      '#.#.###.#.#...........#........',
      '......#..#.........#........#..',
      '...........##.#........#.#...#.',
      '.....#.#......##.......#.....##',
      '...##...#............#..#.....#',
      '.....#..##....##...##.#..#.#...',
      '...#...#........#.#......##....',
      '........#..##..#..#......##.#..',
      '.#.#.....#.....#...........#.##',
      '.#...#.#............#......#...',
      '.....#...#........#....#..#.#..',
      '...##....#..#...#..............',
      '#....##.#.#............#.......',
      '#..#..#.....##..#........##.#.#',
      '##..#.#....#....##.......###..#',
      '.#.#.#.....###.....#.#......###',
      '.....#..#...###...#....#.#...#.',
      '.##.....................##....#',
      '.#.....#.........#....#.....##.',
      '#...#....#.#...###.......#.#..#',
      '...#.................#.#....#.#',
      '.##...#.#......................',
      '.##.#........#...##............',
      '.#....#.....#.........#.##..##.',
      '#......#...##..#.........##.##.',
      '......#......#...####..#.##....',
      '.###....#..##......#.##......#.',
      '..#...#....#..#.......#.#......',
      '#....#...#.................#.#.',
      '....#.#.#..#...#..#.......#.#.#',
      '#.#...##.......#.....##.#......',
      '#.........#.....##..##..#......',
      '....#..##..#.....#..#..#.#..#..',
      '......#.#..#.#.#....#.#.......#',
      '.##......#..#....##...##..#....',
      '..#..#......#...##..#.##.....#.',
      '..#..#.......#.#....#.....#...#',
      '....#.#.....###...#.......#.#..',
      '..#....##.....##.#........##...',
      '#...............##....#.....##.',
      '.#.........#....#...##.###.##.#',
      '.#.##..#.............#.#.#..#..',
      '.#.....#.................##....',
      '..####.........#.#......#.#..#.',
      '#.......#..........#.#........#',
      '.#.#...##.....#.#.......#....#.',
      '..#.##.#.......###....#....#...',
      '.#....##.............##.#.#.#..',
      '#.#.....#.#.#.#..#......##..#..',
      '.............#..........#.#.#..',
      '...#.#.............#.#...##....',
      '.......#..#.#.......#..#.#....#',
      '.............#.........###..#..',
      '.#.#..#....#.....#..#.....#...#',
      '#.....#....##..##.#..#........#',
      '..##..###.....##....#.#..#.....',
      '..#...##....#...#.#..........#.',
      '...##..##.#.....#....#.........',
      '..#...#........##.#..#........#',
      '#.............#.###......#.##..',
      '.#...#........#...........#...#',
      '..##.......#.#..##.##......#...',
      '...#.#...##....##..#...........',
      '.#......##........#....##....#.',
      '.........#..#....#...#..##.##..',
      '....#..#.#...#.......#.#.##....',
      '...#.#......#.#..#..#.#....#..#',
      '.......#........#.........###..',
      '#.#..#.#.........##............',
      '##..##..#.##..###...#.#...#....',
      '.#....#.#..#...#....#.##.....#.',
      '.#.#.#.#........##...#..#.#.##.',
      '.#..#.#..#...........#..#......',
      '..#.##.#...#....#.........#...#',
      '.....##...#.#...#...#....#.....',
      '..#..........#.#.#.......##.#..',
      '#.#............#..#.....#..#...',
      '..#...........##.#.##.#....#..#',
      '#..####.....#............#.....',
      '.##......#####.#..#.....#....#.',
      '...##..#.#......#.#..#..#...##.',
      '#....................#.##...#.#',
      '...#............#.............#',
      '....#.##..........#.....#......',
      '....##..##....#.#..............',
      '...........#....##.#.....#.....',
      '....#.....#....#....#......#...',
      '#...##........#...#........#.#.',
      '........#.....##..#.##.#..#.#.#',
      '....##......##....#.....##....#',
      '...#.#........##.......#...##..',
      '#......##..#.#.#....##......#..',
      '..#.......#.......##..#.##.....',
      '.#...#...#.#.............##....',
      '......#.#.#.........##...#..#.#',
      '.....#..####....#.##..........#',
      '...#...#.#....#.....#..#.....##',
      '.........#.......#......###....',
      '........##..##..#.#.#...###...#',
      '.#..##.#....#...##.....#.#.#...',
      '........##...#...##..#.........',
      '.........#.......#.##..#...####',
      '#......#.....#..............#.#',
      '##..##.#.##.....##...........#.',
      '#.............#.........#......',
      '...####.#.##..#.#.#.##.#......#',
      '..#.....##....#...#............',
      '#..............#......#...###..',
      '..#..#.#...#.##.........##.....',
      '..#...##..#........#..#.##..##.',
      '......###...#..#....#..#.###...',
      '...##.##.###.....##.#.......#..',
      '#....#..###..#.......#.#.#..#..',
      '..##.............##..##...###.#',
      '.#.#..#.........#..........#...',
      '.........#.#.....##...#..#...##',
      '....#..#....#####..#...#..#....',
      '...#.....#.....#...#.#..#.#....',
      '.#..#.............#.......##.#.',
      '...##.......#.#.....##......#..',
      '...........##..#.##..###...#.#.',
      '...........#...........#...#..#',
      '..#....#.##.#..#..#...........#',
      '..#.....##...#......#...#......',
      '...###.###.....##..........#..#']


# repeat the tree pattern on the right 
def rep(s,n):
    return s*n

def rep_row(tbl,n):
    tbl_out = []
    for (i,r) in enumerate(tbl):
        tbl_out.append(rep(r,n))
    return tbl_out

# debug 
def gprint(grid):
    for r in grid:
        print(r)
        
# navigation functions
def next11(i,j):
    return i+1,j+1

def next13(i,j):
    return i+1,j+3

def next15(i,j):
    return i+1,j+5

def next71(i,j):
    return i+1,j+7

def next12(i,j):
    return i+2,j+1

def start():
    return 0,0

def open_or_tree(grid,i,j):
    if grid[i][j] == '.':
        res = 'O'
    if grid[i][j] == '#':
        res = 'X'
    return res
            
def walk(grid, next):
    countX = 0
    i,j = start()
    row = 0
    while (row <= len(grid)-1):
        print('on row {}: ({},{})={}'.format(row,i,j,grid[i][j]))        
        r = open_or_tree(grid,i,j)
        if (r == 'X'):
            countX = countX + 1
        # next 
        i,j = next(i,j)
        row = i
    return countX

# how many times to repeat template map
def repeat_grid(rows, cols, ratio):
    return round(rows * ratio / cols) + 1

# test
col_rep = repeat_grid(len(t0), len(t0[0]), 7)
test0 = rep_row(t0,col_rep)
#gprint(test0)
countx01 = walk(test0, next11)
countx02 = walk(test0, next13)
countx03 = walk(test0, next15)
countx04 = walk(test0, next71)
countx05 = walk(test0, next12)
print('{} * {} * {} * {} * {} = {}'.format(countx01,countx02,countx03,countx04,countx05,countx01*countx02*countx03*countx04*countx05))



# actual
col_rep = repeat_grid(len(t1), len(t1[0]), 7)
test1 = rep_row(t1,col_rep)
#gprint(test1)
countx01 = walk(test1, next11)
countx02 = walk(test1, next13)
countx03 = walk(test1, next15)
countx04 = walk(test1, next71)
countx05 = walk(test1, next12)
print('{} * {} * {} * {} * {} = {}'.format(countx01,countx02,countx03,countx04,countx05,countx01*countx02*countx03*countx04*countx05))

